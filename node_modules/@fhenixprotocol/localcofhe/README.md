# LocalCofhe

LocalCofhe is a local development environment for the Fhenix Protocol CoFHE coprocessor.

## Prerequisites

- Docker and Docker Compose
- Node.js (for CLI tools)
- pnpm (package manager)

## Project Structure

```
.
├── bin/           # CLI tools and executables
├── configs/       # Configuration files
├── keys/          # Key storage directory
└── docker-compose.yml  # Docker services configuration
```

## Getting Started (Global Install)

1. Clone the repository:

```bash
git clone git@github.com:FhenixProtocol/localcofhe.git
cd localcofhe
```

2. Install dependencies and the CLI tool globally:

```bash
pnpm install
pnpm install -g .
```

3. Start the local development environment using the CLI:

```bash
npx localcofhe up
```

4. When finished, the containers can be torn down with:

```bash
npx localcofhe down
```

## Getting Started (Dependency)

1. Install the package as a dependency in your project:

```bash
pnpm add localcofhe
```

2. Import and use the functions in your code:

```typescript
import { localCofheUp, localCofheDown, localCofhePull } from 'localcofhe'

// Start the environment
await localCofheUp()

// Stop the environment
await localCofheDown()

// Pull latest Docker images
await localCofhePull()
```

## Services

The following services are available in the local environment:

- **Host Chain**: Main blockchain node (ports: 42069, 42070, 42000)
- **Registry Chain**: Secondary blockchain node (ports: 42169, 42170, 42100)
- **FHEOS Server**: Fully Homomorphic Encryption Operating System server
- **Middleware**: API middleware service
- **RabbitMQ**: Message broker (ports: 5672, 15672)
- **Coordinator**: Network coordination service (port: 50050)
- **Dispatcher**: Request dispatching service (ports: 3000, 50054)
- **Party Members**: 5 threshold network party members
- **ZK Verifier**: Zero-knowledge proof verification service (port: 3001)

## Configuration

The environment can be configured through environment variables:

- `KEYS_PATH`: Path to the keys directory (default: ./localcofhenix/keys)
- `CONFIG_DIR`: Path to the configuration directory (default: ./localcofhenix/configs)
